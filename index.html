<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S81HR4CPCK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'G-S81HR4CPCK');
    </script>

    <meta charset="UTF-8">
    <style>
        body {
            font-family: ComicSans;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            text-align: center;
        }

        p {
            font-size: 18px;
            margin-top: 20px;
        }

        img {
            width: 300px;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<script>
    // Function to extract parameters from the URL
    console.log('1');
    function getQueryParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    // Function to handle QR code redirection
   // console.log('2');
   // function handleRedirect() {
    //    console.log('2.5');
        const qrCodeParam = getQueryParam('qrcode');
    //    console.log(qrCodeParam);
    //    console.log(getQueryParam('qrcode'));

        console.log('QR Code Parameter:', qrCodeParam);  // Log the QR code parameter

        // mapping of QR codes to destination URLs
        const qrCodeMappings = {
            'code1': 'https://nsccapstone.github.io/page1.html',
            'code2': 'https://nsccapstone.github.io/page2.html',
            'code3': 'https://nsccapstone.github.io/index.html',
            // Add more QR code mappings as needed
        };

        // Check if the QR code parameter is valid
        console.log('3');
        console.log(qrCodeParam);
        console.log(qrCodeMappings.hasOwnProperty(qrCodeParam));
        
        if (qrCodeParam && qrCodeMappings.hasOwnProperty(qrCodeParam)) {
            // Redirect to the corresponding URL
            console.log('Redirecting to:', qrCodeMappings[qrCodeParam]);  // Log the destination URL

            // Track the QR code scan in Google Analytics with custom dimension
            gtag('event', 'QRCodeScan', {
                'event_category': 'QRCode',
                'event_label': qrCodeParam,
                'dimension1': qrCodeParam,  // Custom dimension for code1 or code2
            });

            window.location.href = qrCodeMappings[qrCodeParam];
        } else {
            // Handle invalid or missing QR code parameter
            console.error('Invalid QR code');
        }
    }

    // Call the handleRedirect function on page load
  //  window.onload = handleRedirect;
</script>

<p>Good click! Thumbs up for you!</p>
<img src="thumbsup.gif" alt="Thumbs up because you did a good job">

</body>
</html>
